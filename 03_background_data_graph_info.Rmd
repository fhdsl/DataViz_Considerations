# Which visualization should I use?

A data visualization represents data in a simplified way. The visualization is made up of the represented data as well as the means by which the data is represented: textual and graphical design elements. Each conventional plot type utilizes a combination of design elements in a predictable way or layout. The design elements are the building blocks for the data visualizations. Deciding which design elements and plot type to use relies on several considerations: The type(s) and amount of data that you're visualizing as well as the question you are trying to answer or message you want to communicate.

## Learning Objectives

```{r fig.align = 'center', out.width = "100%", echo = FALSE, fig.alt = "This chapter will demonstrate how to describe the type or types of data within your dataset, explain how data is encoded within data visualizations, analyze which plot works with your data types and the question you want to answer, evaluate strengths and weaknesses of various standard plots, and identify resources that can help you choose which plot works for you."}
ottrpal::include_slide("https://docs.google.com/presentation/d/1fu-KfdN2ldOXB49o9zdpurFbVvl1bOh8cfQ3vu0szk4/edit?slide=id.g3a4b3643292_0_31#slide=id.g3a4b3643292_0_31")
```

## Data types

A dataset is a collection of records or observations. This course assumes that the dataset you are going to visualize has been processed and wrangled such that it is a "structured dataset." In structured datasets, typically each row (or "record") contains observations for a single sample or patient. Each column is a different observation or variable for that sample or patient. Every variable will be unique either because different things are being measured or documented or because the same thing is being measured at different time points. When thinking about the amount of data that will be displayed in a visualization, there are two different considerations: the number of observations (the number of rows) and the number of variables (which and how many columns).

<details><summary>Wide vs Long datasets</summary>

Some datasets may utilize a "long" approach to stack similar variables on top of each other with a new column helping to distinguish them and repeating record IDs across multiple rows; but this "long" approach is typically used as input to visualization software.

</details>

There are two main types of data within a dataset: **numerical** and **categorical** data. A dataset will likely have a mixture of these data types and new variables may be generated using the original data through transformations. Transformations can be used by performing mathemtical operations or converting between data types. Converting numerical data into categorical data is accomplished through binning or by employing a cutoff value. Alternatively, categorical data may need to be encoded as numerals so the data is in a form that requires less storage or so that a computer or algorithm can process it (e.g., machine readable). <ADD REF> There may be more specialized data types depending on your research question, such as relational or spatial data, but these tend to be just more complex and more defined format versions of numerical and categorical data.

### Numerical data

Numerical data is data that **quantitatitevly** represents some count or measurement. Mathematical operations such as addition, subtraction, division, multiplication, exponentiation, etc. are appropriate.

There are two subtypes of numerical data: *discrete* and *continuous*. Whole numbers or integers (e.g., 103 and 25,975) are examples of discrete data while decimals (e.g., 98.6 and 32.25) are examples of continuous data.

```{r eval = FALSE, fig.align = 'center', out.width = "100%", echo = FALSE, fig.alt = ""}
ottrpal::include_slide("")   
```

Examples of numerical data within the biomedical field include

* a blood test result value or concentration
* a patient's age
* the thickness of a tumor
* the length of stay for a patient at the hospital
* a survival probability

### Categorical data

Categorical data **qualitatively** characterizes, categorizes, or groups objects or individuals with labels. Categorical data sometimes may look like numbers when they are group IDs or some sort of ranking or index score. However, A-B-C could be switched out for 1-2-3 making such data categorical data.

Survey data frequently has categorical data that appears as numbers because responses are typically "coded". This is especially true for biomedical data from platforms like REDCap.

There are two subtypes of categorical data: *nominal* and *ordinal*. Nominal data is data that can't be ordered, for example "Case" and "Control". Ordinal data is data that can be ordered, for example "A", "B", "C" or "January 14, 1994", "February 8, 1995", "March 18, 1996".

While you may be able to do some arithmetic operations with ordinal data specifically (like finding an average ranking or finding the distance between numerically encoded categories), typically arithmetic operations aren't appropriate for categorical data and shouldn't be used because the numbers don't have mathematical meaning. Index scores particularly should be treated like categorical data given that they represent categories. However, they often have order to them (are oridinal) and therefore, because the index or score is fundamentally a number, it's made up of other numbers and can be tracked over time, etc.

```{r eval = FALSE, fig.align = 'center', out.width = "100%", echo = FALSE, fig.alt = ""}
ottrpal::include_slide("")   
```

Examples of categorical data within the biomeidcal field include

* patient or sample IDs
* treatment group
* patient sex
* tumor location
* Patient Health Questionnaire-9 (PHQ-9) Score / depression severity level <ADD REF>
* Charlson-Deyo Comorbidity Index <ADD REF>

## Data encodings

Data encoding is the process of representing data using visual elements or graphical attributes. These include geometric marks and visual channels which are the building blocks of data visualization. Different graph types utilize different encodings to represent data: geometric marks are typically the primary means of representing data across graph types while the visual channels are usually used as secondary or additional methods (e.g., shape, color, and textures). However, color can be a primary means of data encoding for certain graphs like heatmaps or choropleths <ADD REF>.   

### Geometric marks

These building blocks are also referred to as "geometric marks" and they include

* points
* lines
* bars
* area
* angle

**Points**: An example of a conventional plot type that uses points is a scatter plot. Points typically are circles but can be other shapes (like triangles or squares), and typically represent one person or sample.

**Lines**: An example of a convetional plot type that uses points is a line plot. Lines connect different data points. Slope may be a value of interest when working with lines, but it's often difficult for audiences to compare slope values visually without labels. Lines may also be trendlines that aren't connecting explicit data points and rather are added to a plot to show a general relationship or trend. Lines are often used to add anootations for summary statistics such as averages as well as medians or quartiles (in boxplots).

**Bars**: Bars use height (vertical bars) or length (horizontal bars) to communicate information about a set of samples. Within bar charts, width typically isn't used to communicate information about data, but for plot types like flow diagrams or histograms, bar width does convey a meaningful value.

**Area**:

**Angles**:

### Visual channels

These visual building blocks are also referred to as "visual channels" and they control the way that the geometric building blocks will appear. You can change the shape, color, or size of a point, but it's still a point. Visual channels include

* position
* shape
* color
* textures
* size
* transparency
* tilt

**Position**: often reflects numerical value with marks that are near each other have more similar values than marks that are further away.

**Shape**: may reflect categorization or group membership

**Colors**: may reflect categorization or group membership

**Textures**: Sometimes used in place of or as a supplement to color

**Size**:

**Transparency**:

**Tilt**:

### Additional design tools

* labels
* facets or subplots
* line types or width


## Goals of data visualization

There are many different possible goals for creating a data visualization. Among those include

* looking at a <u>distribution</u>
* showing a <u>correlation</u> or other relationship between variables
* finding a <u>ranking</u>
* displaying <u>change</u> over time or after an intervention

## Standard graph types

### Conventional graphs

Conventional graph types include histograms, scatter plots, bar plots, and line charts. Each of these are used to answer a different question.

|                             | Histogram | Scatter plot | Bar plot | Line chart |
|:----------------------------|:---------:|:------------:|:--------:|:----------:|
| Primary type of data        | Numerical | Numerical   | Numerical & Categorical | Numerical |
| Minimum number of variables | 1         | 2            | 2        | 2
| Primary data encoding       | Area and Position | Point and Position | Area & Labels/Position | Line and Position |
| Goal                        | looking at a distribution | showing a correlation | finding a ranking | displaying change over time |

<!--| Additional data encodings    | --        | Shape, color, or size  | Color | Point, shape, color, or size |-->

<describe how other types of data, additional variables, or additional data encodings may be used for these graph types.>

### Ranking and distribution plots

#### Violin Plots

#### Boxplots

#### Ridgeline plots

#### Raincloud plots

<u>The strengths of the plots that help you compare groups</u>

<b>Violin</b> plots are good if you want to look at distribution characteristics (e.g., skew or multimodality) at a glance.

<b>Boxplots</b> are great if you want to see the data and general summary statistics (e.g., median).

<b>Ridgeline</b> plots are great at comparing distributions of lots of groups.

<b>Raincloud</b> plots are great when you want to go deep and see everything for a small number of groups (exploratory analysis)

### Group composition and response plots

#### Stacked bar charts

#### Waterfall plots

#### Heatmaps

<u>The strengths of the plots for gorup composition and response</u>

<b>Stacked bar</b> charts are good if you want to look at how subgroup composition changes at a glane over time, but it is less useful with lots of subgroups.

<b>Waterfall</b> plots are good if you have a baseline to compare to for (1) a single time point, (2) many samples/patients, and (3) clearly know what above ore below that baseline means.

<b>Heatmaps</b> are good if you have at least 3 variables that you need to visualize and want to use color as the primary means to communicate the point of the visualization (e.g., the range of values, correlation, areas of density, patterns across groups or time)

### Summarizing complex relationships plots

<u>The strengths of the plots for summarizing complex relationships</u>

<b>Caterpillar</b> plots are good if you want to look at effects and variation at a glance to identify the best/worst (the extremes) or see the overall range.

<b>Sankey diagrams</b> are good if you want to look at the possible trajectories of symptoms, treatments, etc. and it's important to know what combinations occur.

### Field standard plots

## Galleries

## Summary

When choosing a data visualization to meet your needs, use the simplest or most mainstream plot you can! Make sure that the plot works with your data type(s), number of variables, and the goal or research question. Use design tools to develop your visualization before switching to a more complex plot. These design tools include utilizing facets or subplots, dashed lines and text labels, and varying colors, textures, or shapes.
